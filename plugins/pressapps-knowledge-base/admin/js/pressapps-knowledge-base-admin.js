!function(s){"use strict";var i={common:{init:function(){s(function(){i.common.reset_post_vote(),i.common.reset_all_votes(),PAKB_admin.reorder&&(s("body").hasClass("taxonomy-knowledgebase_category")?i.common.order_taxonomies():i.common.order_posts())})},reset_all_votes:function(){s("body.knowledge-base_page_pakb-options-voting").on("click",".notice-dismiss",function(){var t=s(this).closest(".wrap").find("#message");t.fadeOut().delay(300).queue(function(e){t.remove(),e()})}),s("#pakb_vote_reset_all").on("click",function(e){e.preventDefault(),confirm(PAKB_admin.reset_all_confirmation)&&s.ajax({url:ajaxurl,type:"POST",dataType:"json",data:{action:"pakb_reset_vote_all_admin"},success:function(e){e.success&&s(".wrap h1").after('<div id="message" class="updated notice is-dismissible"><p>'+PAKB_admin.reset_success+'</p><button type="button" class="notice-dismiss"><span class="screen-reader-text">Dismiss this notice.</span></button></div>')},error:function(e){console.log(e)}})})},reset_post_vote:function(){s("body.post-type-knowledgebase").on("click",".notice-dismiss",function(){var t=s(this).closest(".wrap").find("#message");t.fadeOut().delay(300).queue(function(e){t.remove(),e()})}),s(".pakb-reset-vote").on("click",function(e){e.preventDefault(),confirm(PAKB_admin.reset_confirmation)&&s.ajax({url:ajaxurl,type:"POST",dataType:"json",data:{action:"pakb_reset_vote_admin",post_id:s(this).attr("data-post-id"),reset_nonce:s(this).attr("data-reset-nonce")},success:function(e){e.post_likes_update&&s("#post-"+e.post_id).find(".likes").html("<p>0</p>"),e.post_dislikes_update&&s("#post-"+e.post_id).find(".dislikes").html("<p>0</p>"),e.post_likes_update&&e.post_dislikes_update&&s(".wrap h1").after('<div id="message" class="updated notice is-dismissible"><p>'+PAKB_admin.reset_success+'</p><button type="button" class="notice-dismiss"><span class="screen-reader-text">Dismiss this notice.</span></button></div>')},error:function(e){console.log(e)}})})},order_posts:function(){s("#the-list").sortable({items:"tr",opacity:.6,cursor:"move",axis:"y",update:function(){var e=s(this).sortable("serialize")+"&action=pakb_order_update_posts";s.post(ajaxurl,e,function(e){})}})},order_taxonomies:function(){s("#the-list").sortable({items:"tr",opacity:.6,cursor:"move",axis:"y",update:function(){var e=s(this).sortable("serialize")+"&action=pakb_order_update_taxonomies";s.post(ajaxurl,e,function(e){})}})}}},o={fire:function(e,t,s){var o=i;t=void 0===t?"init":t,""!==e&&o[e]&&"function"==typeof o[e][t]&&o[e][t](s)},loadEvents:function(){o.fire("common"),s.each(document.body.className.replace(/-/g,"_").split(/\s+/),function(e,t){o.fire(t),o.fire(t,"finalize")}),o.fire("common","finalize")}};s(document).ready(o.loadEvents)}(jQuery);